# 临时记录

### window下nginx基本操作

```nginx
./start nginx :		启动nginx

./nginx -s reload  	重新启动

./nginx -s stop  	停止
```

### 测试环境nginx基本操作

```nginx
# 进入 /usr/local/ngnix/sbin/nginx  ‘
#启动
./nginx	

# 启动
./nginx -s reload	

# 关闭
./nginx -s stop	
```

### 检查是否已经安装nginx及对应目录

```nginx
find /|grep nginx.conf
```

### 查看占用443端口的进程的pid

netstat -aon|findstr "443"

### URL处理正则

/^http?/i
/http?:\/\//gi
/http?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*/gi

### express配置其他路由 

app.use('/webapp/public', serve('./public', true))

### hosts文件地址

C:\Windows\System32\drivers\etc  

### git远程仓库地址变更

git remote rm origin
git remote add origin [url]

### 撤销git commit的内容

1、找到之前提交的git commit的id
git log
找到想要撤销的id

2、git reset –hard id
完成撤销,同时将代码恢复到前一commit_id 对应的版本

3、git reset id
完成Commit命令的撤销，但是不对代码修改进行撤销，可以直接通过git commit 重新提交对本地代码的修改

### git 删除远程分支

 git push origin --delete 分支名 

### git强制覆盖本地代码

 git reset --hard origin/master

### git关联多个远程库

先添加第一个仓库：

git remote add origin https://gitee.com/zkzong/mongodb.git

再添加第二个仓库：

git remote set-url --add origin https://github.com/zkzong/mongodb.git

然后使用下面命令提交：

git push origin --all

### git设置默认编辑器为vim

git config --global core.editor vim

### git 标签

新建轻量级标签

git tag <tagname>

列出标签  

git tag 

推送标签

git push <tagname>

一次推送所有本地新增的标签上去，可以使用 `--tags` 选项

git push  --tags

删除本地标签

git tag -d <tagname>

删除远程标签

git push origin --delete  <tagname>

查看远程分支和tag

git ls-remote

### chrome插件

账号：u5207541@126.com
密码：uu@5207541
地址：https://chrome.google.com/webstore/detail/export-callrecord/paamneakandpkopffcchoepbmeaidepj?hl=zh-CN&authuser=1

### vue事件处理时访问原生DOM事件event

1、绑定事件处理函数： 默认会把$event作为处理函数的第一个参数传入
handle（event） {
  console.log(event)
}
2、直接调用事件处理函数，需要手动把$event传入到处理函数中
<button v-on:click="handle(payload， $event)">Say what</button>
handle（payload, event） {
  console.log(event)
}

### vuex取值undefined

问题：通过mapState从store中取出某个值时，在mouted中打印时为undefined
原因：因为是从store中取得值，该值是其他组件保存到store中取得，在当前组件mouted时store中可能还没有这个值

### 手机号正则

^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(16[0-9])|(17[0-9])|(18[0-9])|(19[0-9]))\d{8}$

### 系统后台接口测试公众号

wxid_nslb0p79gk7511 

### 安装APK到真机

```bash
 adb -s 7N2XEE157T030354 install app-release.apk 
```

### centos 安装 mysql5.7

```bash
yum-config-manager --add-repo  http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo  

yum install docker-ce -y 

docker start 

docker run -p 3306:3306 --name mysql -v /root/mysql/my.cnf:/etc/my.cnf -v /root/mysql/data:/var/lib/mysql  --privileged=true -e MYSQL_ROOT_PASSWORD=a1234567 -d --restart=always mysql:5.7

#删除
docker rm -f mysql
```

### 判断文件格式

```javascript
/**
 * 判断文件格式
 * filename: 文件名
 * 需要判断的文件格式 image-图片 office-office文件 pdf-pdf文件
 */
const judgmentFileFormat = function (filename, fileType) {
  var imageExt = ['bmp', 'jpg', 'jpeg', 'png', 'tiff', 'gif']
  var officeExt = ['doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx']
  var pdfExt = ['.pdf']
  var videoExt = ['rm', 'rmvb', 'mov', 'dat', 'wmv', 'avi', 'flv', 'mp4']
  var audioExt = ['mp3', 'awv', 'wma']
  var fileExt = null
  var name = filename.toLowerCase()
  var i = name.lastIndexOf('.')
  if (i > -1) {
    fileExt = name.substring(i)
  }
  var compareFileExt
  if (fileType) {
    if (fileType === 'image') {
      compareFileExt = imageExt
    } else if (fileType === 'office') {
      compareFileExt = officeExt
    } else if (fileType === 'pdf') {
      compareFileExt = pdfExt
    } else if (fileType === 'video') {
      compareFileExt = videoExt
    } else if (fileType === 'audio') {
      compareFileExt = audioExt
    } else {
      return null
    }
  }
  if ($.inArray(fileExt, compareFileExt) !== -1) {
    return true
  }
  return false
}
```

### vue-video-player只有声音，屏幕黑屏

问题： MP4有4种编码，MPEG4(DivX)，MPEG4(Xvid)，AVC(H264)， HEVC(H265)，H5播放器不全支持

解决：用工具转换成H264编码就可以在网页上正常播放了（MPEG4(DivX) —> AVC(H264) ）

### audio读取文件流播放音频

问题：audio读取文件流时无法获取音频时长

解决：java代码

```java
@RequestMapping("getAudio")  
@ResponseBody
public String getAudio(HttpServletRequest request, HttpServletResponse response) throws Exception{
  Map<String, Object> map = getPageMapParams();	
  List<Map<String, Object>> list_new =xcxQqandWxServices.getimgOraudiopath(map);
    
  String path = (String)list_new.get(0).get("TRANCFILEPATH");
  if (path!=null) {
    String range = request.getHeader("Range");  
    String[] rs = range.split("\\=");  
    range = rs[1].split("\\-")[0]; 
    File file = new File(path);  
    OutputStream os = response.getOutputStream();  
    FileInputStream fis = new FileInputStream(file);  
    long length = file.length();  
    // 播放进度  
    int count = 0;  
    // 播放百分比  
    int percent = (int)(length * 1);  
    int irange = Integer.parseInt(range);  
    length = length - irange;  

    response.addHeader("Accept-Ranges", "bytes");  
    response.addHeader("Content-Length", length + "");  
    response.addHeader("Content-Range", "bytes " + range + "-" + length + "/" + length);  
    response.addHeader("Content-Type", "audio/mpeg;charset=UTF-8");   

    int len = 0;  
    byte[] b = new byte[1024];  
    while ((len = fis.read(b)) != -1) {  
      os.write(b, 0, len);  
      count += len;  
      if(count >= percent){  
        break;  
      }  
    }  
    fis.close();  
    os.close();  
  }
  return null;
}
```

### 会话cookie

会话cookie不会被持久化，没有过期时间，浏览器中看到的 1969-12-31T23:59:59.000Z 是一个UTC标准时间，chrome中表示会话cookie。

unix时间戳是从1970-01-01T00:00:00Z开始的，这个也是我们计算时间戳的起始时间。

console.log(new Date('1969-12-31T23:59:59.000Z').getTime());这个值是 -1000，-1秒，是习惯表达。
